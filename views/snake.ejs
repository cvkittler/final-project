<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Final</title>

    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />

    <script src="//unpkg.com/vue@latest/dist/vue.min.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.min.js"></script>
</head>

<body>
    <main role="main" class="container" id="app">
        <div class="snake">
            <h1>{{ msg }}</h1>
            <canvas id="canvas" width="800" height="800">
            </canvas>
        </div>
        <!-- The golbal score board -->
        <table id="score-board">
            <tr v-for="player in scoreBoard" :id="'plater' + player.player_name" :key="player.id">
                <td>{{ player.player_name }}</td>
                <td>{{ player.value }}</td>
            </tr>
        </table>
    </main>
    <script>
        window.app = new Vue({
            el: '#app',
            data() {
                return {
                    msg: 'Snake game'
                }
            },
            renderScoreBoard: function () {
                const requestOptions = {
                    method: "GET",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({}),
                };
                fetch("/api/minesweeper/all_scores", requestOptions)
                    .then((response) => response.json())
                    .then((data) => (this.scoreBoard = data));
            },
            created() {
                const plugin = document.createElement('script')
                plugin.setAttribute(
                    'src',
                    '/project.js'
                )
                plugin.async = true
                document.head.appendChild(plugin)
            }
        });
    </script>
</body>

</html>